<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Reward DJDN v10.0 - Ultra Professional</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Monetag SDK -->
    <script src='//libtl.com/sdk.js' data-zone='10078826' data-sdk='show_10078826'></script>
    
    <style>
        /* ===========================
           üé® VARIABLES & RESET
        =========================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            /* New Color Palette - Modern & Professional */
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --primary-glow: rgba(99, 102, 241, 0.4);
            
            --secondary: #ec4899;
            --secondary-light: #f472b6;
            --secondary-dark: #db2777;
            --secondary-glow: rgba(236, 72, 153, 0.4);
            
            --accent: #f59e0b;
            --accent-light: #fbbf24;
            --accent-dark: #d97706;
            --accent-glow: rgba(245, 158, 11, 0.4);
            
            --success: #10b981;
            --success-glow: rgba(16, 185, 129, 0.4);
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            
            /* Backgrounds - Dark Theme */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: rgba(30, 41, 59, 0.85);
            --bg-glass: rgba(30, 41, 59, 0.5);
            --bg-overlay: rgba(15, 23, 42, 0.95);
            
            /* Text Colors */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --text-muted: #64748b;
            
            /* Borders */
            --border-primary: rgba(99, 102, 241, 0.3);
            --border-secondary: rgba(148, 163, 184, 0.2);
            --border-light: rgba(248, 250, 252, 0.1);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);
            --gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --gradient-gold: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #fbbf24 100%);
            --gradient-dark: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
            --shadow-xl: 0 16px 40px rgba(0, 0, 0, 0.6);
            
            /* Transitions */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Z-index */
            --z-base: 1;
            --z-dropdown: 100;
            --z-sticky: 200;
            --z-fixed: 300;
            --z-modal: 400;
            --z-popover: 500;
            --z-tooltip: 600;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding-bottom: 90px;
            line-height: 1.6;
        }

        /* ===========================
           üåå ANIMATED BACKGROUND
        =========================== */
        
        .cyber-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .cyber-background::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(99, 102, 241, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(236, 72, 153, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.08) 0%, transparent 60%);
            animation: backgroundMove 25s ease-in-out infinite;
        }

        @keyframes backgroundMove {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(5%, 5%) rotate(120deg); }
            66% { transform: translate(-5%, 5%) rotate(240deg); }
        }

        .grid-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(var(--border-light) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-light) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.03;
        }

        /* ===========================
           üéØ APP CONTAINER
        =========================== */
        
        .app-container {
            position: relative;
            z-index: var(--z-base);
        }

        /* ===========================
           üé™ HEADER - COMPACT & ELEGANT
        =========================== */
        
        .header {
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            background: var(--bg-overlay);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border-secondary);
            padding: 12px 16px;
            box-shadow: var(--shadow-md);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 0;
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            position: relative;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }

        .level-mini {
            position: absolute;
            bottom: -4px;
            right: -4px;
            background: var(--gradient-gold);
            border-radius: 8px;
            padding: 2px 6px;
            font-size: 9px;
            font-weight: 800;
            color: #000;
            box-shadow: var(--shadow-sm);
            font-family: 'Space Grotesk', monospace;
        }

        .user-info {
            flex: 1;
            min-width: 0;
        }

        .username {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-stats-mini {
            display: flex;
            gap: 10px;
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 500;
        }

        .balance-chip {
            background: var(--gradient-primary);
            padding: 8px 14px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 14px;
            color: #fff;
            box-shadow: var(--shadow-md);
            font-family: 'Space Grotesk', monospace;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .xp-bar-container {
            width: 100%;
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-bar-fill {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px var(--primary-glow);
            position: relative;
        }

        .xp-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .xp-info {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
            font-size: 10px;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* ===========================
           üì¶ CONTAINER
        =========================== */
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 16px;
        }

        .page {
            display: none;
            animation: fadeInUp 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===========================
           üé¥ MODERN CARDS
        =========================== */
        
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border-secondary);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            transition: var(--transition-normal);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: var(--transition-normal);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-badge {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            color: var(--primary-light);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
            font-family: 'Space Grotesk', monospace;
        }

        /* ===========================
           üéÆ MODERN BUTTONS
        =========================== */
        
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 15px;
            font-weight: 700;
            font-family: 'Space Grotesk', monospace;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: var(--transition-normal);
            box-shadow: var(--shadow-md);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: #fff;
        }

        .btn-secondary {
            background: var(--gradient-secondary);
            color: #fff;
        }

        .btn-success {
            background: var(--gradient-success);
            color: #fff;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ===========================
           ‚ö° MINING SECTION - COMPACT
        =========================== */
        
        .mining-compact {
            text-align: center;
            padding: 20px;
        }

        .mining-icon-wrap {
            position: relative;
            display: inline-block;
            margin-bottom: 16px;
        }

        .mining-icon {
            font-size: 80px;
            animation: float-mining 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px var(--primary-glow));
        }

        @keyframes float-mining {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-12px);
            }
        }

        .mining-reward-text {
            font-size: 32px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .mining-timer-text {
            font-size: 18px;
            font-family: 'Space Grotesk', monospace;
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 1s ease;
            box-shadow: 0 0 15px var(--primary-glow);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        /* ===========================
           üìä STATS GRID - COMPACT
        =========================== */
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .stat-card {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            transition: var(--transition-normal);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-primary);
        }

        .stat-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: var(--primary-light);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ===========================
           üéØ QUICK ACTIONS
        =========================== */
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .action-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-secondary);
            border-radius: 16px;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .action-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-primary);
            opacity: 0;
            transition: var(--transition-normal);
        }

        .action-card:hover {
            transform: translateY(-6px);
            border-color: var(--border-primary);
            box-shadow: var(--shadow-lg);
        }

        .action-card:hover::before {
            opacity: 0.1;
        }

        .action-icon {
            font-size: 40px;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .action-title {
            font-size: 14px;
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            color: var(--text-primary);
            margin-bottom: 4px;
            position: relative;
            z-index: 1;
        }

        .action-subtitle {
            font-size: 11px;
            color: var(--text-tertiary);
            position: relative;
            z-index: 1;
        }

        /* ===========================
           üèÜ LEADERBOARD
        =========================== */
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-secondary);
            border-radius: 16px;
            margin-bottom: 10px;
            transition: var(--transition-normal);
        }

        .leaderboard-item:hover {
            transform: translateX(6px);
            border-color: var(--border-primary);
            box-shadow: var(--shadow-md);
        }

        .rank-badge {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 18px;
            font-family: 'Space Grotesk', monospace;
            box-shadow: var(--shadow-sm);
            flex-shrink: 0;
        }

        .rank-1 {
            background: var(--gradient-gold);
            color: #000;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
        }

        .rank-2 {
            background: linear-gradient(135deg, #e2e8f0, #cbd5e1);
            color: #000;
        }

        .rank-3 {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: #fff;
        }

        .rank-other {
            background: var(--bg-tertiary);
            color: var(--primary-light);
            border: 2px solid var(--border-primary);
        }

        .leaderboard-info {
            flex: 1;
            min-width: 0;
        }

        .leaderboard-name {
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--text-primary);
        }

        .leaderboard-stats {
            display: flex;
            gap: 10px;
            font-size: 11px;
            color: var(--text-tertiary);
        }

        .leaderboard-reward {
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: var(--success);
            font-size: 14px;
            white-space: nowrap;
        }

        /* ===========================
           üé∞ LUCKY WHEEL - ULTRA PREMIUM
        =========================== */
        
        .wheel-section {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
            border-radius: 24px;
            padding: 32px 20px;
            margin: 24px 0;
            border: 2px solid var(--border-primary);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.2);
            position: relative;
            overflow: hidden;
        }

        .wheel-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
            animation: rotateBackground 20s linear infinite;
        }

        @keyframes rotateBackground {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .wheel-title-section {
            text-align: center;
            margin-bottom: 24px;
            position: relative;
            z-index: 2;
        }

        .wheel-main-title {
            font-size: 28px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #fbbf24 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
            animation: goldShimmer 3s ease-in-out infinite;
        }

        @keyframes goldShimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        .wheel-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .wheel-container {
            position: relative;
            width: 340px;
            height: 340px;
            margin: 32px auto;
            filter: drop-shadow(0 20px 60px rgba(99, 102, 241, 0.4));
        }

        .wheel-outer-ring {
            position: absolute;
            inset: -20px;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #6366f1 0deg 60deg,
                #8b5cf6 60deg 120deg,
                #ec4899 120deg 180deg,
                #f59e0b 180deg 240deg,
                #10b981 240deg 300deg,
                #6366f1 300deg 360deg
            );
            animation: rotateRing 4s linear infinite;
            opacity: 0.3;
        }

        @keyframes rotateRing {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .wheel-canvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 
                0 0 60px rgba(99, 102, 241, 0.6),
                0 0 100px rgba(236, 72, 153, 0.4),
                inset 0 0 40px rgba(0, 0, 0, 0.3);
            border: 6px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 2;
        }

        .wheel-pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            filter: drop-shadow(0 4px 20px rgba(251, 191, 36, 0.8));
            animation: bouncePointer 1.5s ease-in-out infinite;
        }

        .wheel-pointer::before {
            content: '‚ñº';
            font-size: 48px;
            color: #fbbf24;
            display: block;
            text-shadow: 0 0 20px rgba(251, 191, 36, 1);
        }

        @keyframes bouncePointer {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: #000;
            border: 6px solid #fff;
            box-shadow: 
                0 0 40px rgba(251, 191, 36, 0.8),
                0 0 60px rgba(245, 158, 11, 0.6),
                inset 0 -10px 30px rgba(0, 0, 0, 0.2);
            z-index: 5;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .wheel-center:hover {
            transform: translate(-50%, -50%) scale(1.15);
            box-shadow: 
                0 0 60px rgba(251, 191, 36, 1),
                0 0 80px rgba(245, 158, 11, 0.8),
                inset 0 -10px 30px rgba(0, 0, 0, 0.2);
        }

        .wheel-center:active {
            transform: translate(-50%, -50%) scale(0.95);
        }

        .wheel-center-icon {
            font-size: 32px;
            margin-bottom: 4px;
            animation: spinIcon 2s linear infinite;
        }

        @keyframes spinIcon {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .wheel-center-text {
            font-size: 13px;
            letter-spacing: 1px;
        }

        .wheel-prizes-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 24px 0;
            position: relative;
            z-index: 2;
        }

        .prize-chip {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: 2px solid var(--border-secondary);
            border-radius: 16px;
            padding: 16px 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .prize-chip:hover {
            transform: translateY(-4px);
            border-color: var(--border-primary);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
        }

        .prize-chip-icon {
            font-size: 28px;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .prize-chip-amount {
            font-size: 12px;
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            color: var(--primary-light);
            margin-bottom: 4px;
        }

        .prize-chip-label {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .wheel-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 24px 0;
            position: relative;
            z-index: 2;
        }

        .wheel-stat-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-secondary);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .wheel-stat-box:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--border-primary);
        }

        .wheel-stat-value {
            font-size: 24px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: var(--primary-light);
            margin-bottom: 6px;
        }

        .wheel-stat-label {
            font-size: 11px;
            color: var(--text-tertiary);
            font-weight: 600;
            text-transform: uppercase;
        }

        .wheel-info-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            z-index: 2;
        }

        .wheel-info-box::before {
            content: 'üíé';
            position: absolute;
            top: -15px;
            right: 20px;
            font-size: 60px;
            opacity: 0.2;
        }

        .wheel-info-title {
            font-size: 16px;
            font-weight: 800;
            color: var(--success);
            margin-bottom: 12px;
            font-family: 'Space Grotesk', monospace;
        }

        .wheel-info-content {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .wheel-info-content strong {
            color: var(--success);
        }

        .spin-history-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-secondary);
            border-radius: 20px;
            padding: 20px;
            margin-top: 24px;
            position: relative;
            z-index: 2;
        }

        .spin-history-title {
            font-size: 18px;
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-secondary);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: var(--border-primary);
            transform: translateX(6px);
        }

        .history-result {
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-result.jackpot {
            color: #fbbf24;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.6);
        }

        .history-result.win {
            color: var(--success);
        }

        .history-result.retry {
            color: var(--secondary-light);
        }

        .history-time {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* ===========================
           üë• REFERRAL
        =========================== */
        
        .referral-hero {
            background: var(--gradient-success);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .referral-hero::before {
            content: 'üë•';
            position: absolute;
            top: -30px;
            right: -30px;
            font-size: 150px;
            opacity: 0.1;
        }

        .referral-content {
            position: relative;
            z-index: 1;
        }

        .referral-title {
            font-size: 24px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            margin-bottom: 8px;
            color: #fff;
        }

        .referral-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .referral-link-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 14px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .referral-link-text {
            word-break: break-all;
            color: #000;
            font-weight: 600;
            font-size: 13px;
            font-family: 'Space Grotesk', monospace;
            user-select: all;
        }

        .referral-actions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .referral-btn {
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 13px;
            font-family: 'Space Grotesk', monospace;
            cursor: pointer;
            transition: var(--transition-normal);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
        }

        .referral-btn:active {
            transform: scale(0.95);
        }

        .referral-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .referral-stat-box {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 14px;
            border-radius: 12px;
            text-align: center;
        }

        .referral-stat-value {
            font-size: 22px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: #fff;
            margin-bottom: 4px;
        }

        .referral-stat-label {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
            text-transform: uppercase;
        }

        /* ===========================
           ‚úÖ TASKS
        =========================== */
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-secondary);
            border-radius: 16px;
            margin-bottom: 12px;
            transition: var(--transition-normal);
            cursor: pointer;
        }

        .task-item:hover {
            transform: translateX(6px);
            border-color: var(--border-primary);
            box-shadow: var(--shadow-md);
        }

        .task-icon-box {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            box-shadow: var(--shadow-sm);
            flex-shrink: 0;
        }

        .task-details {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-weight: 800;
            font-size: 14px;
            font-family: 'Space Grotesk', monospace;
            margin-bottom: 6px;
            color: var(--text-primary);
        }

        .task-reward {
            font-size: 13px;
            color: var(--success);
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            margin-bottom: 6px;
        }

        .task-description {
            font-size: 11px;
            color: var(--text-tertiary);
            margin-bottom: 8px;
        }

        .task-progress-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
        }

        .task-progress-fill {
            height: 100%;
            background: var(--gradient-success);
            transition: width 0.3s ease;
        }

        .task-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 12px;
            background: var(--gradient-primary);
            color: #fff;
            font-weight: 700;
            font-size: 12px;
            font-family: 'Space Grotesk', monospace;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition-normal);
            box-shadow: var(--shadow-sm);
        }

        .task-btn:active {
            transform: scale(0.95);
        }

        .task-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Task Detail Modal */
        .task-detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-overlay);
            backdrop-filter: blur(10px);
            z-index: var(--z-modal);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .task-detail-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .task-detail-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .task-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .task-detail-title {
            font-size: 20px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .task-detail-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: var(--transition-normal);
        }

        .task-detail-close:hover {
            background: var(--danger);
        }

        .task-detail-requirements {
            margin-bottom: 20px;
        }

        .requirement-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg-glass);
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .requirement-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .requirement-progress {
            font-size: 14px;
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
        }

        .requirement-progress.complete {
            color: var(--success);
        }

        .requirement-progress.incomplete {
            color: var(--warning);
        }

        /* ===========================
           üí∞ WITHDRAW
        =========================== */
        
        .withdraw-unlock-box {
            background: rgba(245, 158, 11, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid var(--accent);
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .unlock-title {
            font-size: 18px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            margin-bottom: 12px;
            color: var(--accent);
        }

        .unlock-progress-display {
            font-size: 44px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: var(--accent);
            margin: 16px 0;
        }

        .unlock-description {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            font-size: 13px;
            font-family: 'Space Grotesk', monospace;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-secondary);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: var(--transition-normal);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px var(--primary-glow);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        /* ===========================
           üìë TABS
        =========================== */
        
        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            scrollbar-width: none;
            padding: 2px;
        }

        .tabs-container::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 12px 24px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 2px solid var(--border-secondary);
            border-radius: 16px;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 700;
            font-size: 13px;
            font-family: 'Space Grotesk', monospace;
            transition: var(--transition-normal);
            flex-shrink: 0;
        }

        .tab:hover {
            border-color: var(--border-primary);
            transform: translateY(-2px);
        }

        .tab.active {
            background: var(--gradient-primary);
            border-color: transparent;
            color: #fff;
            box-shadow: var(--shadow-md);
        }

        .tab:active {
            transform: scale(0.97);
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* ===========================
           ‚è±Ô∏è COUNTDOWN
        =========================== */
        
        .countdown-box {
            text-align: center;
            padding: 20px;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: 2px solid var(--border-primary);
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .countdown-label {
            font-size: 11px;
            color: var(--text-tertiary);
            margin-bottom: 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .countdown-timer {
            font-size: 28px;
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            color: var(--primary-light);
            text-shadow: 0 0 15px var(--primary-glow);
        }

        /* ===========================
           ‚ÑπÔ∏è INFO BOXES
        =========================== */
        
        .info-box {
            background: rgba(59, 130, 246, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .info-box p {
            font-size: 13px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .info-box strong {
            color: var(--info);
            font-weight: 700;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(245, 158, 11, 0.4);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .warning-box p {
            font-size: 13px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .warning-box p:last-child {
            margin-bottom: 0;
        }

        .warning-box strong {
            color: var(--warning);
            font-weight: 700;
        }

        /* ===========================
           üé® HISTORY ITEMS
        =========================== */
        
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-secondary);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: var(--transition-normal);
        }

        .history-item:hover {
            border-color: var(--border-primary);
            transform: translateX(4px);
        }

        .history-result {
            font-weight: 800;
            font-family: 'Space Grotesk', monospace;
            color: var(--success);
        }

        .history-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* ===========================
           üî• LEVEL SYSTEM
        =========================== */
        
        .level-badge-large {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient-primary);
            padding: 14px 28px;
            border-radius: 20px;
            font-weight: 900;
            font-size: 18px;
            font-family: 'Space Grotesk', monospace;
            color: #fff;
            box-shadow: var(--shadow-lg);
        }

        .level-progress-container {
            width: 100%;
            height: 12px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            margin: 16px 0;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.4);
        }

        .level-progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.5s ease;
            box-shadow: 0 0 15px var(--primary-glow);
            position: relative;
        }

        .level-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .level-info-text {
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 8px;
            font-weight: 600;
            font-family: 'Space Grotesk', monospace;
        }

        .level-benefits-list {
            margin-top: 16px;
        }

        .benefit-item {
            display: flex;
            justify-content: space-between;
            padding: 14px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: var(--transition-normal);
        }

        .benefit-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(4px);
        }

        .benefit-label {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 13px;
        }

        .benefit-value {
            color: var(--primary-light);
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            font-size: 13px;
        }

        /* Guide Section */
        .guide-section {
            margin-bottom: 24px;
        }

        .guide-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--primary-light);
            font-weight: 900;
            font-family: 'Space Grotesk', monospace;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .guide-content {
            font-size: 13px;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .guide-list {
            list-style: none;
            padding: 0;
        }

        .guide-list li {
            padding: 10px;
            background: var(--bg-glass);
            border-radius: 10px;
            margin-bottom: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .guide-list li strong {
            color: var(--primary-light);
        }

        /* ===========================
           üì± BOTTOM NAVIGATION
        =========================== */
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-overlay);
            backdrop-filter: blur(30px) saturate(180%);
            border-top: 1px solid var(--border-secondary);
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            padding: 8px 0 calc(8px + env(safe-area-inset-bottom, 0px)) 0;
            z-index: var(--z-fixed);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 6px;
            cursor: pointer;
            transition: var(--transition-fast);
            border-radius: 12px;
            margin: 0 2px;
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 12px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: var(--transition-normal);
        }

        .nav-item.active::before {
            opacity: 0.15;
        }

        .nav-item:active {
            transform: scale(0.95);
        }

        .nav-icon {
            font-size: 22px;
            margin-bottom: 2px;
            position: relative;
            z-index: 1;
            filter: grayscale(100%);
            transition: var(--transition-normal);
        }

        .nav-item.active .nav-icon {
            filter: grayscale(0%);
        }

        .nav-label {
            font-size: 9px;
            font-weight: 700;
            font-family: 'Space Grotesk', monospace;
            color: var(--text-muted);
            position: relative;
            z-index: 1;
            transition: var(--transition-normal);
        }

        .nav-item.active .nav-label {
            color: var(--primary-light);
        }

        /* ===========================
           üîî NOTIFICATIONS
        =========================== */
        
        .toast-notification {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-success);
            color: #fff;
            padding: 16px 28px;
            border-radius: 16px;
            box-shadow: var(--shadow-xl);
            z-index: var(--z-tooltip);
            opacity: 0;
            transition: var(--transition-normal);
            max-width: 90%;
            text-align: center;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Space Grotesk', monospace;
        }

        .toast-notification.show {
            opacity: 1;
            animation: slideInDown 0.4s ease, slideOutUp 0.4s ease 2.5s;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes slideOutUp {
            from {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
            to {
                opacity: 0;
                transform: translateX(-50%) translateY(-30px);
            }
        }

        .toast-notification.error {
            background: var(--gradient-secondary);
        }

        /* ===========================
           ‚è≥ LOADING
        =========================== */
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-overlay);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            backdrop-filter: blur(10px);
        }

        .loading-overlay.show {
            display: flex;
        }

        .loader-container {
            text-align: center;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid var(--bg-tertiary);
            border-top-color: var(--primary);
            border-right-color: var(--secondary);
            border-bottom-color: var(--accent);
            border-radius: 50%;
            animation: spin-loader 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin-loader {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            font-size: 16px;
            font-weight: 700;
            font-family: 'Space Grotesk', monospace;
            color: var(--primary-light);
        }

        /* ===========================
           üì± RESPONSIVE
        =========================== */
        
        @media (max-width: 400px) {
            .container {
                padding: 12px;
            }

            .mining-icon {
                font-size: 70px;
            }

            .mining-reward-text {
                font-size: 28px;
            }

            .wheel-container {
                width: 260px;
                height: 260px;
            }

            .card {
                padding: 16px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 360px) {
            .balance-chip {
                font-size: 12px;
                padding: 6px 12px;
            }

            .username {
                font-size: 14px;
            }

            .nav-label {
                font-size: 8px;
            }

            .nav-icon {
                font-size: 20px;
            }
        }

        /* ===========================
           ‚ú® CONFETTI
        =========================== */
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary);
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* ===========================
           üéØ UTILITY CLASSES
        =========================== */
        
        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .mb-8 { margin-bottom: 8px; }
        .mb-12 { margin-bottom: 12px; }
        .mb-16 { margin-bottom: 16px; }
        .mb-20 { margin-bottom: 20px; }

        .mt-8 { margin-top: 8px; }
        .mt-12 { margin-top: 12px; }
        .mt-16 { margin-top: 16px; }
        .mt-20 { margin-top: 20px; }

        .text-center { text-align: center; }
        .font-bold { font-weight: 700; }
        .font-black { font-weight: 900; }

        .hidden { display: none; }
    </style>
</head>
<body>
    <!-- Cyber Background -->
    <div class="cyber-background">
        <div class="grid-overlay"></div>
    </div>

    <div class="app-container">
        <!-- ===========================
             üé™ HEADER
        =========================== -->
        <div class="header">
            <div class="header-content">
                <div class="user-section">
                    <div class="avatar">
                        üë§
                        <div class="level-mini" id="headerLevelMini">ü•â</div>
                    </div>
                    <div class="user-info">
                        <div class="username" id="headerUsername">Loading...</div>
                        <div class="user-stats-mini">
                            <span>‚ö° <span id="headerXP">0</span></span>
                            <span>üì∫ <span id="headerAds">0</span></span>
                        </div>
                    </div>
                </div>
                <div class="balance-chip" id="headerBalance">0.000000</div>
            </div>
            <div class="xp-bar-container">
                <div class="xp-bar-fill" id="headerXPBar" style="width: 0%"></div>
            </div>
            <div class="xp-info">
                <span id="headerXPText">0 / 2000 XP</span>
                <span id="headerLevel">ü•â Bronze</span>
            </div>
        </div>

        <div class="container">
            <!-- ===========================
                 üè† HOME PAGE
            =========================== -->
            <div class="page active" id="page-home">
                <!-- Mining Card -->
                <div class="card">
                    <div class="mining-compact">
                        <div class="mining-icon-wrap">
                            <div class="mining-icon">‚ö°</div>
                        </div>
                        <div class="mining-reward-text" id="miningReward">+0.00020 TON</div>
                        <div class="mining-timer-text" id="miningTimer">Ready to start!</div>
                        <div class="progress-container">
                            <div class="progress-fill" id="miningProgress"></div>
                        </div>
                        <button class="btn btn-primary" id="mineButton" onclick="handleMining()">
                            üöÄ START MINING
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="card">
                    <div class="card-title">üìä Dashboard</div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üì∫</div>
                            <div class="stat-value" id="statAdsToday">0</div>
                            <div class="stat-label">Ads Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-value" id="statEarnings">0.000</div>
                            <div class="stat-label">Earned</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üîë</div>
                            <div class="stat-value" id="statKeys">0</div>
                            <div class="stat-label">Keys</div>
                        </div>
                        <div class="stat-card" onclick="showPage('level')">
                            <div class="stat-icon">üìö</div>
                            <div class="stat-value">Guide</div>
                            <div class="stat-label">Learn More</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="action-card" onclick="showPage('earn')">
                        <div class="action-icon">üì∫</div>
                        <div class="action-title">Watch Ads</div>
                        <div class="action-subtitle">Earn TON</div>
                    </div>
                    <div class="action-card" onclick="showPage('tasks')">
                        <div class="action-icon">‚úÖ</div>
                        <div class="action-title">Tasks</div>
                        <div class="action-subtitle">Complete</div>
                    </div>
                    <div class="action-card" onclick="showPage('referral')">
                        <div class="action-icon">üë•</div>
                        <div class="action-title">Invite</div>
                        <div class="action-subtitle">+0.00035 TON</div>
                    </div>
                    <div class="action-card" onclick="showPage('withdraw')">
                        <div class="action-icon">üí∞</div>
                        <div class="action-title">Withdraw</div>
                        <div class="action-subtitle">Cash Out</div>
                    </div>
                </div>
            </div>

            <!-- ===========================
                 üèÜ LEADERBOARD PAGE
            =========================== -->
            <div class="page" id="page-leaderboard">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üèÜ Top 50 Daily</div>
                    </div>
                    
                    <div class="countdown-box">
                        <div class="countdown-label">‚è∞ RESETS IN</div>
                        <div class="countdown-timer" id="leaderboardTimer">--:--:--</div>
                    </div>

                    <div class="info-box">
                        <p><strong>üéÅ Daily Rewards:</strong></p>
                        <p>ü•á 1st: <strong>0.003 TON</strong> | ü•à 2nd: <strong>0.002 TON</strong> | ü•â 3rd: <strong>0.001 TON</strong></p>
                    </div>

                    <div id="leaderboardList">
                        <p class="text-center" style="color: var(--text-tertiary); padding: 20px;">Loading leaderboard...</p>
                    </div>
                </div>

                <div class="card" style="background: rgba(99, 102, 241, 0.1); border-color: var(--border-primary);">
                    <div class="card-title">üìç Your Position</div>
                    <div id="userPosition" class="mt-16">
                        <p class="text-center" style="color: var(--text-secondary);">Watch ads to rank!</p>
                    </div>
                </div>
            </div>

            <!-- ===========================
                 üë• REFERRAL PAGE
            =========================== -->
            <div class="page" id="page-referral">
                <div class="referral-hero">
                    <div class="referral-content">
                        <div class="referral-title">üë• Invite Friends</div>
                        <div class="referral-subtitle">Earn 0.00035 TON per friend!</div>
                        
                        <div class="referral-link-box">
                            <div class="referral-link-text" id="referralLink">Loading...</div>
                        </div>
                        
                        <div class="referral-actions-grid">
                            <button class="referral-btn" onclick="copyReferralLink()">
                                üìã Copy
                            </button>
                            <button class="referral-btn" onclick="shareReferralLink()">
                                üì§ Share
                            </button>
                        </div>

                        <div class="referral-stats-grid">
                            <div class="referral-stat-box">
                                <div class="referral-stat-value" id="refTotal">0</div>
                                <div class="referral-stat-label">Total</div>
                            </div>
                            <div class="referral-stat-box">
                                <div class="referral-stat-value" id="refValidated">0</div>
                                <div class="referral-stat-label">Valid</div>
                            </div>
                            <div class="referral-stat-box">
                                <div class="referral-stat-value" id="refEarned">0.000</div>
                                <div class="referral-stat-label">Earned</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">‚ÑπÔ∏è How It Works</div>
                    <div class="info-box mt-16">
                        <p><strong>üí° Referral System:</strong></p>
                        <p>1Ô∏è‚É£ Share your unique link</p>
                        <p>2Ô∏è‚É£ Friend uses your link</p>
                        <p>3Ô∏è‚É£ They open the app</p>
                        <p>4Ô∏è‚É£ You earn <strong>0.00035 TON</strong></p>
                    </div>
                </div>
            </div>

            <!-- ===========================
                 ‚úÖ TASKS PAGE
            =========================== -->
            <div class="page" id="page-tasks">
                <div class="tabs-container">
                    <div class="tab active" onclick="switchTaskTab('daily')">Daily Tasks</div>
                    <div class="tab" onclick="switchTaskTab('onetime')">One-Time</div>
                </div>

                <!-- Daily Tasks -->
                <div class="tab-content active" id="tab-daily">
                    <div class="countdown-box">
                        <div class="countdown-label">‚è∞ TASKS RESET IN</div>
                        <div class="countdown-timer" id="tasksTimer">--:--:--</div>
                    </div>

                    <div class="warning-box">
                        <p><strong>‚ö†Ô∏è Important:</strong></p>
                        <p>Claim rewards before UTC midnight or they expire!</p>
                    </div>

                    <div id="dailyTasksList">
                        <!-- Task 1 -->
                        <div class="task-item" onclick="showTaskDetail(1)">
                            <div class="task-icon-box">üéØ</div>
                            <div class="task-details">
                                <div class="task-title">Daily Challenge #1</div>
                                <div class="task-reward">+0.001 TON</div>
                                <div class="task-description">Click for details</div>
                                <div class="task-progress-bar">
                                    <div class="task-progress-fill" id="task1Progress" style="width: 0%"></div>
                                </div>
                            </div>
                            <button class="task-btn" id="task1Btn" onclick="event.stopPropagation(); claimDailyTask(1)">Check</button>
                        </div>

                        <!-- Task 2 -->
                        <div class="task-item" onclick="showTaskDetail(2)">
                            <div class="task-icon-box">üéØ</div>
                            <div class="task-details">
                                <div class="task-title">Daily Challenge #2</div>
                                <div class="task-reward">+0.002 TON</div>
                                <div class="task-description">Click for details</div>
                                <div class="task-progress-bar">
                                    <div class="task-progress-fill" id="task2Progress" style="width: 0%"></div>
                                </div>
                            </div>
                            <button class="task-btn" id="task2Btn" onclick="event.stopPropagation(); claimDailyTask(2)">Check</button>
                        </div>

                        <!-- Task 3 -->
                        <div class="task-item" onclick="showTaskDetail(3)">
                            <div class="task-icon-box">üéØ</div>
                            <div class="task-details">
                                <div class="task-title">Daily Challenge #3</div>
                                <div class="task-reward">+0.003 TON</div>
                                <div class="task-description">Click for details</div>
                                <div class="task-progress-bar">
                                    <div class="task-progress-fill" id="task3Progress" style="width: 0%"></div>
                                </div>
                            </div>
                            <button class="task-btn" id="task3Btn" onclick="event.stopPropagation(); claimDailyTask(3)">Check</button>
                        </div>
                    </div>
                </div>

                <!-- One-Time Tasks -->
                <div class="tab-content" id="tab-onetime">
                    <div class="info-box">
                        <p><strong>‚úÖ Complete once!</strong></p>
                        <p>Required before first withdrawal.</p>
                    </div>

                    <div id="onetimeTasksList">
                        <!-- Channel Task -->
                        <div class="task-item">
                            <div class="task-icon-box">üì¢</div>
                            <div class="task-details">
                                <div class="task-title">Join Official Channel</div>
                                <div class="task-reward">+0.0001 TON</div>
                                <div class="task-description">Required for withdrawal</div>
                            </div>
                            <button class="task-btn" id="channelTaskBtn" onclick="handleChannelTask()">Join</button>
                        </div>

                        <!-- Withdraw Channel Task -->
                        <div class="task-item">
                            <div class="task-icon-box">üí∏</div>
                            <div class="task-details">
                                <div class="task-title">Join Withdraw Proofs</div>
                                <div class="task-reward">+0.0001 TON</div>
                                <div class="task-description">Required for withdrawal</div>
                            </div>
                            <button class="task-btn" id="withdrawChannelTaskBtn" onclick="handleWithdrawChannelTask()">Join</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Task Detail Modal -->
            <div class="task-detail-modal" id="taskDetailModal">
                <div class="task-detail-content">
                    <div class="task-detail-header">
                        <div class="task-detail-title" id="taskDetailTitle">Task Details</div>
                        <button class="task-detail-close" onclick="closeTaskDetail()">√ó</button>
                    </div>
                    <div class="task-detail-requirements" id="taskDetailRequirements">
                        <!-- Will be populated dynamically -->
                    </div>
                    <button class="btn btn-primary" id="taskDetailClaimBtn" onclick="claimTaskFromDetail()">
                        Claim Reward
                    </button>
                </div>
            </div>

            <!-- ===========================
                 üì∫ EARN PAGE
            =========================== -->
            <div class="page" id="page-earn">
                <div class="tabs-container">
                    <div class="tab active" onclick="switchEarnTab('simple')">Watch Ads</div>
                    <div class="tab" onclick="switchEarnTab('wheel')">Lucky Wheel</div>
                </div>

                <!-- Watch Simple -->
                <div class="tab-content active" id="earn-simple">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">üì∫ Watch Ads</div>
                            <div class="card-badge" id="simpleAdsCount">0/1000</div>
                        </div>

                        <div class="mining-compact">
                            <div class="mining-icon-wrap">
                                <div class="mining-icon">üì∫</div>
                            </div>
                            <div class="mining-reward-text">+0.000012 TON</div>
                            <div class="mining-timer-text">Per ad watched</div>
                        </div>

                        <div class="info-box">
                            <p><strong>üí° How it works:</strong></p>
                            <p>‚Ä¢ <strong>0.000012 TON</strong> per ad</p>
                            <p>‚Ä¢ Max <strong>1000 ads/day</strong></p>
                            <p>‚Ä¢ After 200: <strong>10-min cooldown</strong></p>
                        </div>

                        <button class="btn btn-secondary" id="watchSimpleBtn" onclick="watchSimpleAd()">
                            ‚ñ∂Ô∏è WATCH AD NOW
                        </button>

                        <div id="simpleCooldown" class="text-center mt-12" style="color: var(--text-tertiary); font-size: 13px;"></div>

                        <div class="stats-grid mt-20">
                            <div class="stat-card">
                                <div class="stat-value" id="simpleToday">0</div>
                                <div class="stat-label">Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="simpleTotal">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lucky Wheel -->
                <div class="tab-content" id="earn-wheel">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">üîë Earn Keys</div>
                            <div class="card-badge" id="keysCount">0 Keys</div>
                        </div>

                        <div class="info-box">
                            <p><strong>üéÅ How to get Keys:</strong></p>
                            <p>‚Ä¢ Watch ads for Keys</p>
                            <p>‚Ä¢ <strong>1 ad = 1 Key</strong></p>
                            <p>‚Ä¢ Max <strong>250 keys/day</strong></p>
                            <p>‚Ä¢ After 50: <strong>10-min cooldown</strong></p>
                        </div>

                        <button class="btn btn-primary" id="watchKeyBtn" onclick="watchForKey()">
                            ‚ñ∂Ô∏è WATCH AD (+1 KEY)
                        </button>

                        <div id="keyCooldown" class="text-center mt-12" style="color: var(--text-tertiary); font-size: 13px;"></div>

                        <div class="stats-grid mt-20">
                            <div class="stat-card">
                                <div class="stat-value" id="keysToday">0</div>
                                <div class="stat-label">Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="keysAdsTotal">0</div>
                                <div class="stat-label">Total Ads</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="wheel-section">
                            <div class="wheel-title-section">
                                <div class="wheel-main-title">üé∞ LUCKY WHEEL üé∞</div>
                                <div class="wheel-subtitle">Spin to win amazing rewards!</div>
                            </div>

                            <div class="wheel-info-box">
                                <div class="wheel-info-title">üíé Prize Pool</div>
                                <div class="wheel-info-content">
                                    Spin the wheel and win <strong>TON rewards</strong>! Each spin costs <strong>1 Key</strong>. Land on <strong>RETRY</strong> for a free spin!
                                </div>
                            </div>

                            <div class="wheel-prizes-display">
                                <div class="prize-chip" style="border-color: rgba(99, 102, 241, 0.4);">
                                    <div class="prize-chip-icon" style="color: #6366f1;">üíß</div>
                                    <div class="prize-chip-amount">0.000009</div>
                                    <div class="prize-chip-label">Common</div>
                                </div>
                                <div class="prize-chip" style="border-color: rgba(59, 130, 246, 0.4);">
                                    <div class="prize-chip-icon" style="color: #3b82f6;">üíô</div>
                                    <div class="prize-chip-amount">0.000010</div>
                                    <div class="prize-chip-label">Rare</div>
                                </div>
                                <div class="prize-chip" style="border-color: rgba(245, 158, 11, 0.4);">
                                    <div class="prize-chip-icon" style="color: #f59e0b;">üíõ</div>
                                    <div class="prize-chip-amount">0.000012</div>
                                    <div class="prize-chip-label">Epic</div>
                                </div>
                                <div class="prize-chip" style="border-color: rgba(16, 185, 129, 0.4);">
                                    <div class="prize-chip-icon" style="color: #10b981;">üíö</div>
                                    <div class="prize-chip-amount">0.000015</div>
                                    <div class="prize-chip-label">Super</div>
                                </div>
                                <div class="prize-chip" style="border-color: rgba(139, 92, 246, 0.4);">
                                    <div class="prize-chip-icon" style="color: #8b5cf6;">üíé</div>
                                    <div class="prize-chip-amount">0.000017</div>
                                    <div class="prize-chip-label">Jackpot</div>
                                </div>
                                <div class="prize-chip" style="border-color: rgba(236, 72, 153, 0.4);">
                                    <div class="prize-chip-icon" style="color: #ec4899;">üîÑ</div>
                                    <div class="prize-chip-amount">RETRY</div>
                                    <div class="prize-chip-label">Free Spin</div>
                                </div>
                            </div>
                            
                            <div class="wheel-container">
                                <div class="wheel-outer-ring"></div>
                                <div class="wheel-pointer"></div>
                                <canvas id="wheelCanvas" class="wheel-canvas" width="340" height="340"></canvas>
                                <div class="wheel-center" onclick="spinWheel()">
                                    <div class="wheel-center-icon">üéØ</div>
                                    <div class="wheel-center-text">SPIN</div>
                                </div>
                            </div>

                            <button class="btn btn-secondary" id="spinBtn" onclick="spinWheel()" style="margin-top: 20px;">
                                üé≤ SPIN THE WHEEL
                            </button>

                            <div class="wheel-stats-grid" style="margin-top: 24px;">
                                <div class="wheel-stat-box">
                                    <div class="wheel-stat-value" id="spinKeysDisplay">0</div>
                                    <div class="wheel-stat-label">Keys Left</div>
                                </div>
                                <div class="wheel-stat-box">
                                    <div class="wheel-stat-value" id="totalSpinsToday">0</div>
                                    <div class="wheel-stat-label">Spins Today</div>
                                </div>
                                <div class="wheel-stat-box">
                                    <div class="wheel-stat-value" id="totalWonToday">0.000</div>
                                    <div class="wheel-stat-label">Won Today</div>
                                </div>
                            </div>
                        </div>

                        <div class="spin-history-card">
                            <div class="spin-history-title">üèÜ Recent Spins</div>
                            <div id="spinHistory">
                                <p class="text-center" style="color: var(--text-tertiary); padding: 16px;">No spins yet - try your luck!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===========================
                 üî• LEVEL PAGE
            =========================== -->
            <div class="page" id="page-level">
                <div class="tabs-container">
                    <div class="tab active" onclick="switchLevelTab('stats')">My Level</div>
                    <div class="tab" onclick="switchLevelTab('guide')">Complete Guide</div>
                </div>

                <!-- My Level -->
                <div class="tab-content active" id="level-stats">
                    <div class="card">
                        <div class="text-center">
                            <div class="level-badge-large" id="currentLevelBadge">ü•â Bronze</div>
                            <div class="level-progress-container">
                                <div class="level-progress-fill" id="levelXPBar" style="width: 0%"></div>
                            </div>
                            <div class="level-info-text" id="levelXPProgress">0 / 2000 XP</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üìä Level Benefits</div>
                        <div class="level-benefits-list">
                            <div class="benefit-item">
                                <span class="benefit-label">Mining Bonus:</span>
                                <strong class="benefit-value" id="levelMiningBonus">0.00020 TON</strong>
                            </div>
                            <div class="benefit-item">
                                <span class="benefit-label">Min Withdraw:</span>
                                <strong class="benefit-value" id="levelMinWithdraw">0.003 TON</strong>
                            </div>
                            <div class="benefit-item">
                                <span class="benefit-label">Daily Ads Needed:</span>
                                <strong class="benefit-value">300 ads</strong>
                            </div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <p><strong>‚ö†Ô∏è Level Protection:</strong></p>
                        <p>‚Ä¢ Watch <strong>300+ ads/day</strong></p>
                        <p>‚Ä¢ <strong>&lt;300 ads</strong> = lose one level</p>
                        <p>‚Ä¢ <strong>1 day inactive</strong> = reset to Bronze</p>
                        <p id="levelAdsWarning"></p>
                    </div>
                </div>

                <!-- Complete Guide -->
                <div class="tab-content" id="level-guide">
                    <div class="card">
                        <div class="guide-section">
                            <div class="guide-title">üéØ What is TON Reward?</div>
                            <div class="guide-content">
                                TON Reward is a Telegram mini-app where you earn real TON cryptocurrency by watching ads, completing tasks, and referring friends. It's simple, fast, and 100% free!
                            </div>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">‚ö° How to Earn</div>
                            <ul class="guide-list">
                                <li><strong>Watch Ads:</strong> Earn 0.000012 TON per ad (up to 1000/day)</li>
                                <li><strong>Mining:</strong> Start mining every 3 hours for bonus TON</li>
                                <li><strong>Referrals:</strong> Invite friends and earn 0.00035 TON each</li>
                                <li><strong>Daily Tasks:</strong> Complete challenges for extra rewards</li>
                                <li><strong>Lucky Wheel:</strong> Spin for random TON prizes!</li>
                            </ul>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">üî• Level System</div>
                            <div class="guide-content">
                                Your level increases with XP. Watch 1 ad = +2 XP. Each level requires 2000 XP.
                            </div>
                            <ul class="guide-list">
                                <li>ü•â <strong>Bronze:</strong> 0.00020 TON mining | Min withdraw: 0.003 TON</li>
                                <li>ü•à <strong>Silver:</strong> 0.00035 TON mining | Min withdraw: 0.001 TON</li>
                                <li>ü•á <strong>Gold:</strong> 0.00050 TON mining | Min withdraw: 0.0009 TON</li>
                                <li>üíé <strong>Platinum:</strong> 0.00065 TON mining | Min withdraw: 0.0008 TON</li>
                                <li>üíé <strong>Diamond:</strong> 0.00080 TON mining | Min withdraw: 0.0007 TON</li>
                            </ul>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">‚ö†Ô∏è Level Protection</div>
                            <div class="guide-content">
                                To keep your level, watch at least <strong>300 ads per day</strong>. If you watch less than 300 ads, you lose one level. If you're inactive for 1 full day, you reset to Bronze.
                            </div>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">üí∞ Withdrawals</div>
                            <div class="guide-content">
                                Before your first withdrawal, you must:
                            </div>
                            <ul class="guide-list">
                                <li>Join both official Telegram channels</li>
                                <li>Watch 5 withdrawal unlock ads</li>
                                <li>Meet minimum balance for your level</li>
                                <li><strong>NO GAS FEES!</strong> We cover all fees üéâ</li>
                            </ul>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">üèÜ Leaderboard</div>
                            <div class="guide-content">
                                The Top 50 Daily leaderboard resets every UTC midnight. Top 3 users win bonus TON!
                            </div>
                            <ul class="guide-list">
                                <li>ü•á <strong>1st Place:</strong> 0.003 TON</li>
                                <li>ü•à <strong>2nd Place:</strong> 0.002 TON</li>
                                <li>ü•â <strong>3rd Place:</strong> 0.001 TON</li>
                            </ul>
                        </div>

                        <div class="guide-section">
                            <div class="guide-title">üì± Tips for Success</div>
                            <ul class="guide-list">
                                <li>Watch ads consistently every day</li>
                                <li>Refer friends to boost earnings</li>
                                <li>Complete all daily tasks</li>
                                <li>Start mining every 3 hours</li>
                                <li>Aim for Top 50 leaderboard</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===========================
                 üí∞ WITHDRAW PAGE
            =========================== -->
            <div class="page" id="page-withdraw">
                <div class="card">
                    <div class="card-title">üí∞ Withdraw to FaucetPay</div>

                    <div class="info-box mt-16">
                        <p><strong>‚úÖ Requirements:</strong></p>
                        <p>‚Ä¢ Join both official channels</p>
                        <p>‚Ä¢ Watch 5 unlock ads</p>
                        <p>‚Ä¢ Meet minimum balance</p>
                        <p>‚Ä¢ <strong>NO GAS FEES!</strong> üéâ</p>
                    </div>

                    <!-- Channel Warning -->
                    <div class="warning-box" id="channelWarning" style="display: none;">
                        <p><strong>‚ö†Ô∏è Channels Required!</strong></p>
                        <p>Join both channels before withdrawing.</p>
                        <p id="channelStatus"></p>
                        <button class="btn btn-primary mt-12" onclick="showPage('tasks')">
                            Go to Tasks
                        </button>
                    </div>

                    <!-- Withdraw Unlock -->
                    <div class="withdraw-unlock-box" id="withdrawUnlock">
                        <div class="unlock-title">üîì Unlock Withdrawal</div>
                        <div class="unlock-progress-display" id="unlockProgress">0/5</div>
                        <p class="unlock-description">
                            Watch 5 ads to unlock withdrawal<br>
                            (Resets after 2 withdrawals)
                        </p>
                        <button class="btn btn-primary" id="unlockBtn" onclick="watchWithdrawAd()">
                            üì∫ WATCH AD
                        </button>
                    </div>

                    <!-- Withdraw Form -->
                    <div id="withdrawForm">
                        <div class="form-group">
                            <label class="form-label">FaucetPay Email</label>
                            <input type="email" class="form-input" id="faucetpayEmail" placeholder="your@email.com">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Amount (min <span id="minWithdrawAmount">0.003</span> TON)</label>
                            <input type="number" class="form-input" id="withdrawAmount" placeholder="0.003" min="0.0007" step="0.000001">
                        </div>

                        <button class="btn btn-success" id="withdrawBtn" onclick="handleWithdraw()" disabled>
                            üîí UNLOCK FIRST
                        </button>
                    </div>

                    <div class="stats-grid mt-20">
                        <div class="stat-card">
                            <div class="stat-value" id="totalWithdrawn">0.000</div>
                            <div class="stat-label">Withdrawn</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="withdrawCount">0</div>
                            <div class="stat-label">Count</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===========================
             üì± BOTTOM NAVIGATION
        =========================== -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showPage('home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="showPage('leaderboard')">
                <div class="nav-icon">üèÜ</div>
                <div class="nav-label">Top 50</div>
            </div>
            <div class="nav-item" onclick="showPage('tasks')">
                <div class="nav-icon">‚úÖ</div>
                <div class="nav-label">Tasks</div>
            </div>
            <div class="nav-item" onclick="showPage('earn')">
                <div class="nav-icon">üì∫</div>
                <div class="nav-label">Earn</div>
            </div>
            <div class="nav-item" onclick="showPage('referral')">
                <div class="nav-icon">üë•</div>
                <div class="nav-label">Invite</div>
            </div>
            <div class="nav-item" onclick="showPage('withdraw')">
                <div class="nav-icon">üí∞</div>
                <div class="nav-label">Withdraw</div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast-notification" id="notification"></div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loader-container">
                <div class="loader"></div>
                <div class="loader-text">LOADING...</div>
            </div>
        </div>
    </div>

    <!-- ===========================
         üöÄ JAVASCRIPT
    =========================== -->
    <script>
        // ===========================
        // CONFIGURATION
        // ===========================
        
        const CONFIG = {
            API_URL: 'https://ton-reward-djdn-backend.onrender.com',
            BOT_USERNAME: 'TONRewardCrewBot',
            CHANNEL_USERNAME: 'TONRewardCrew',
            WITHDRAW_CHANNEL_USERNAME: 'djdn_withdraw_payments',
            
            LEVELS: {
                BRONZE: { name: 'Bronze', emoji: 'ü•â', min_xp: 0, max_xp: 1999, mining_bonus: 0.00020, min_withdraw: 0.003 },
                SILVER: { name: 'Silver', emoji: 'ü•à', min_xp: 2000, max_xp: 3999, mining_bonus: 0.00035, min_withdraw: 0.001 },
                GOLD: { name: 'Gold', emoji: 'ü•á', min_xp: 4000, max_xp: 5999, mining_bonus: 0.00050, min_withdraw: 0.0009 },
                PLATINUM: { name: 'Platinum', emoji: 'üíé', min_xp: 6000, max_xp: 7999, mining_bonus: 0.00065, min_withdraw: 0.0008 },
                DIAMOND: { name: 'Diamond', emoji: 'üíé', min_xp: 8000, max_xp: 999999, mining_bonus: 0.00080, min_withdraw: 0.0007 }
            },
            
            DAILY_TASKS: {
                1: { mining: 2, ads: 300, coins: 40 },
                2: { mining: 4, ads: 500, coins: 70 },
                3: { mining: 5, ads: 700, coins: 100 }
            }
        };

        // Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // Global Variables
        let userData = null;
        let telegramId = null;
        let username = null;
        let firstName = null;
        let miningInterval = null;
        let monetagLoaded = false;
        let adCounter = 0;
        let wheelSpinning = false;
        let currentTaskDetail = null;

        // ===========================
        // MONETAG CHECK
        // ===========================
        
        function checkMonetagSDK() {
            if (typeof show_10078826 !== 'undefined') {
                monetagLoaded = true;
                return true;
            }
            return false;
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                checkMonetagSDK();
            }, 1000);
        });

        // ===========================
        // USER MANAGEMENT
        // ===========================

        function getTelegramUser() {
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                telegramId = tg.initDataUnsafe.user.id;
                username = tg.initDataUnsafe.user.username || tg.initDataUnsafe.user.first_name || 'User';
                firstName = tg.initDataUnsafe.user.first_name || username;
                const startParam = tg.initDataUnsafe.start_param;
                return { telegramId, username, firstName, referrerId: startParam };
            }
            telegramId = 'test_' + Date.now();
            username = 'Test User';
            firstName = 'Test';
            return { telegramId, username, firstName, referrerId: null };
        }

        async function loadUserData() {
            try {
                showLoading(true);
                const { telegramId, username, firstName, referrerId } = getTelegramUser();
                
                const response = await fetch(`${CONFIG.API_URL}/user/${telegramId}?referrer=${referrerId || ''}`);
                
                if (response.status === 404) {
                    await createUser(telegramId, username, firstName, referrerId);
                    return;
                }
                
                userData = await response.json();
                updateUI();
                startMiningCheck();
                startTimers();
                initWheel();
                loadLeaderboard();
                showLoading(false);
            } catch (error) {
                console.error('Load error:', error);
                showNotification('Connection error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        async function createUser(tid, uname, fname, refId) {
            try {
                const response = await fetch(`${CONFIG.API_URL}/user`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        telegram_id: tid,
                        username: uname,
                        first_name: fname,
                        referrer_id: refId
                    })
                });
                userData = await response.json();
                updateUI();
                startMiningCheck();
                startTimers();
                initWheel();
                loadLeaderboard();
                showLoading(false);
            } catch (error) {
                console.error('Create error:', error);
                showNotification('Account creation error', 'error');
                showLoading(false);
            }
        }

        function getUserLevel(xp) {
            xp = xp || 0;
            for (let level in CONFIG.LEVELS) {
                const lvl = CONFIG.LEVELS[level];
                if (xp >= lvl.min_xp && xp <= lvl.max_xp) {
                    return lvl;
                }
            }
            return CONFIG.LEVELS.BRONZE;
        }

        function updateUI() {
            if (!userData) return;
            
            const xp = userData.xp || 0;
            const level = getUserLevel(xp);
            
            // Header
            document.getElementById('headerUsername').textContent = userData.first_name || userData.username;
            document.getElementById('headerBalance').textContent = (userData.balance || 0).toFixed(6);
            document.getElementById('headerLevelMini').textContent = level.emoji;
            document.getElementById('headerXP').textContent = xp;
            document.getElementById('headerLevel').textContent = `${level.emoji} ${level.name}`;
            
            const totalAdsToday = (userData.ads_watch_simple_today || 0) + (userData.ads_for_keys_today || 0) + 
                                  (userData.mining_count || 0) + (userData.withdraw_ads_watched_current || 0);
            document.getElementById('headerAds').textContent = totalAdsToday;
            
            // XP Progress
            const xpInLevel = xp - level.min_xp;
            const xpNeeded = level.max_xp - level.min_xp + 1;
            const xpPercent = (xpInLevel / xpNeeded) * 100;
            document.getElementById('headerXPBar').style.width = xpPercent + '%';
            document.getElementById('headerXPText').textContent = `${xp} / ${level.max_xp + 1} XP`;
            
            // Mining Reward
            document.getElementById('miningReward').textContent = `+${level.mining_bonus.toFixed(5)} TON`;
            
            // Stats
            document.getElementById('statAdsToday').textContent = totalAdsToday;
            document.getElementById('statEarnings').textContent = (userData.earnings_total || 0).toFixed(3);
            document.getElementById('statKeys').textContent = userData.keys_current || 0;
            
            // Earn Page - Simple
            document.getElementById('simpleAdsCount').textContent = `${userData.ads_watch_simple_today || 0}/1000`;
            document.getElementById('simpleToday').textContent = userData.ads_watch_simple_today || 0;
            document.getElementById('simpleTotal').textContent = userData.ads_watch_simple_total || 0;
            
            // Earn Page - Wheel
            const keysCount = userData.keys_current || 0;
            document.getElementById('keysCount').textContent = `${keysCount} Keys`;
            document.getElementById('keysToday').textContent = userData.keys_earned_today || 0;
            document.getElementById('keysAdsTotal').textContent = userData.ads_for_keys_total || 0;
            document.getElementById('spinKeysDisplay').textContent = keysCount;
            
            // Referral
            const referralLink = userData.invitation_link || `https://t.me/${CONFIG.BOT_USERNAME}?start=${userData.telegram_id}`;
            document.getElementById('referralLink').textContent = referralLink;
            document.getElementById('refTotal').textContent = userData.invitations_count || 0;
            document.getElementById('refValidated').textContent = userData.invitations_count || 0;
            document.getElementById('refEarned').textContent = ((userData.invitations_count || 0) * 0.00035).toFixed(3);
            
            // Level Page
            document.getElementById('currentLevelBadge').textContent = `${level.emoji} ${level.name}`;
            document.getElementById('levelXPBar').style.width = xpPercent + '%';
            document.getElementById('levelXPProgress').textContent = `${xp} / ${level.max_xp + 1} XP`;
            document.getElementById('levelMiningBonus').textContent = level.mining_bonus.toFixed(5) + ' TON';
            document.getElementById('levelMinWithdraw').textContent = level.min_withdraw.toFixed(4) + ' TON';
            
            // Level Warning
            const adsRemaining = Math.max(0, 300 - totalAdsToday);
            const warningEl = document.getElementById('levelAdsWarning');
            if (warningEl) {
                if (adsRemaining > 0) {
                    warningEl.innerHTML = `<strong>‚ö†Ô∏è Watch ${adsRemaining} more ads today!</strong>`;
                } else {
                    warningEl.innerHTML = `<strong style="color: var(--success);">‚úÖ Level protected!</strong>`;
                }
            }
            
            // Withdraw
            document.getElementById('minWithdrawAmount').textContent = level.min_withdraw.toFixed(4);
            document.getElementById('totalWithdrawn').textContent = (userData.total_withdrawn || 0).toFixed(3);
            document.getElementById('withdrawCount').textContent = userData.withdraw_history?.length || 0;
            
            const adsWatched = userData.withdraw_ads_watched_current || 0;
            document.getElementById('unlockProgress').textContent = `${adsWatched}/5`;
            
            // Update daily task progress
            updateDailyTasksProgress();
            checkWithdrawRequirements();
            updateSpinHistory();
            updateTaskButtons();
        }

        function updateDailyTasksProgress() {
            if (!userData) return;
            
            const miningCount = userData.mining_count || 0;
            const adsCount = (userData.ads_watch_simple_today || 0) + (userData.ads_for_keys_today || 0);
            const coinsCount = userData.coins_current || 0;
            
            for (let taskNum = 1; taskNum <= 3; taskNum++) {
                const task = CONFIG.DAILY_TASKS[taskNum];
                const miningDone = miningCount >= task.mining;
                const adsDone = adsCount >= task.ads;
                const coinsDone = coinsCount >= task.coins;
                
                let progress = 0;
                if (miningDone) progress += 33.33;
                if (adsDone) progress += 33.33;
                if (coinsDone) progress += 33.34;
                
                const progressBar = document.getElementById(`task${taskNum}Progress`);
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }
            }
        }

        function updateTaskButtons() {
            if (!userData) return;
            
            // Channel task
            const channelBtn = document.getElementById('channelTaskBtn');
            if (channelBtn) {
                if (userData.tasks_done?.includes('join_channel')) {
                    channelBtn.textContent = '‚úÖ Done';
                    channelBtn.disabled = true;
                }
            }
            
            // Withdraw channel task
            const withdrawChannelBtn = document.getElementById('withdrawChannelTaskBtn');
            if (withdrawChannelBtn) {
                if (userData.tasks_done?.includes('join_withdraw_channel')) {
                    withdrawChannelBtn.textContent = '‚úÖ Done';
                    withdrawChannelBtn.disabled = true;
                }
            }
        }

        function updateSpinHistory() {
            if (!userData) return;
            
            const historyList = document.getElementById('spinHistory');
            const history = userData.lucky_wheel_history || [];
            
            if (history.length === 0) {
                historyList.innerHTML = '<p class="text-center" style="color: var(--text-tertiary); padding: 16px;">No spins yet - try your luck!</p>';
                return;
            }
            
            // Calculate today's stats
            const today = new Date().toISOString().split('T')[0];
            const todaySpins = history.filter(s => s.date.startsWith(today));
            const totalSpinsToday = todaySpins.length;
            const totalWonToday = todaySpins
                .filter(s => s.result !== 'RETRY')
                .reduce((sum, s) => sum + parseFloat(s.result), 0);
            
            document.getElementById('totalSpinsToday').textContent = totalSpinsToday;
            document.getElementById('totalWonToday').textContent = totalWonToday.toFixed(3);
            
            historyList.innerHTML = history.slice(0, 5).map(item => {
                let resultClass = 'win';
                let resultIcon = 'üíö';
                let resultText = '';
                
                if (item.result === 'RETRY') {
                    resultClass = 'retry';
                    resultIcon = 'üîÑ';
                    resultText = 'FREE SPIN';
                } else {
                    const amount = parseFloat(item.result);
                    if (amount >= 0.000017) {
                        resultClass = 'jackpot';
                        resultIcon = 'üíé';
                        resultText = `${amount.toFixed(6)} TON`;
                    } else if (amount >= 0.000015) {
                        resultIcon = 'üíö';
                        resultText = `${amount.toFixed(6)} TON`;
                    } else if (amount >= 0.000012) {
                        resultIcon = 'üíõ';
                        resultText = `${amount.toFixed(6)} TON`;
                    } else if (amount >= 0.000010) {
                        resultIcon = 'üíô';
                        resultText = `${amount.toFixed(6)} TON`;
                    } else {
                        resultIcon = 'üíß';
                        resultText = `${amount.toFixed(6)} TON`;
                    }
                }
                
                const timeAgo = formatTimeAgo(new Date(item.date));
                
                return `
                    <div class="history-item">
                        <div class="history-result ${resultClass}">
                            ${resultIcon} ${resultText}
                        </div>
                        <div class="history-time">${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }

        function formatTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
            return `${Math.floor(seconds / 86400)}d ago`;
        }

        async function checkWithdrawRequirements() {
            if (!userData) return;
            
            const channelDone = userData.tasks_done?.includes('join_channel') || false;
            const withdrawChannelDone = userData.tasks_done?.includes('join_withdraw_channel') || false;
            const adsWatched = userData.withdraw_ads_watched_current || 0;
            
            const channelWarning = document.getElementById('channelWarning');
            const withdrawUnlock = document.getElementById('withdrawUnlock');
            const withdrawBtn = document.getElementById('withdrawBtn');
            
            if (!channelDone || !withdrawChannelDone) {
                channelWarning.style.display = 'block';
                let status = '';
                if (!channelDone) status += '‚ùå Join Official Channel<br>';
                if (!withdrawChannelDone) status += '‚ùå Join Withdraw Proofs';
                document.getElementById('channelStatus').innerHTML = status;
                withdrawBtn.disabled = true;
                withdrawBtn.textContent = 'üîí JOIN CHANNELS FIRST';
                return;
            } else {
                channelWarning.style.display = 'none';
            }
            
            if (adsWatched >= 5) {
                withdrawUnlock.style.background = 'rgba(16, 185, 129, 0.1)';
                withdrawUnlock.style.borderColor = 'var(--success)';
                document.getElementById('unlockBtn').textContent = '‚úÖ UNLOCKED!';
                document.getElementById('unlockBtn').disabled = true;
                withdrawBtn.disabled = false;
                withdrawBtn.textContent = 'üí∏ WITHDRAW NOW';
            } else {
                withdrawUnlock.style.background = 'rgba(245, 158, 11, 0.1)';
                withdrawUnlock.style.borderColor = 'var(--accent)';
                document.getElementById('unlockBtn').textContent = `üì∫ WATCH AD (${adsWatched}/5)`;
                document.getElementById('unlockBtn').disabled = false;
                withdrawBtn.disabled = true;
                withdrawBtn.textContent = `üîí WATCH ${5 - adsWatched} MORE ADS`;
            }
        }

        // ===========================
        // LEADERBOARD
        // ===========================

        async function loadLeaderboard() {
            try {
                const response = await fetch(`${CONFIG.API_URL}/leaderboard/daily`);
                const data = await response.json();
                
                const listEl = document.getElementById('leaderboardList');
                
                if (!data.leaderboard || data.leaderboard.length === 0) {
                    listEl.innerHTML = '<p class="text-center" style="color: var(--text-tertiary); padding: 20px;">No users yet. Be the first!</p>';
                    return;
                }
                
                listEl.innerHTML = data.leaderboard.map((user, index) => {
                    const rank = index + 1;
                    let rankClass = 'rank-other';
                    if (rank === 1) rankClass = 'rank-1';
                    else if (rank === 2) rankClass = 'rank-2';
                    else if (rank === 3) rankClass = 'rank-3';
                    
                    const isCurrentUser = user.telegram_id === userData?.telegram_id;
                    const highlightStyle = isCurrentUser ? 'border-color: var(--primary); box-shadow: 0 0 15px var(--primary-glow);' : '';
                    
                    return `
                        <div class="leaderboard-item" style="${highlightStyle}">
                            <div class="rank-badge ${rankClass}">${rank}</div>
                            <div class="leaderboard-info">
                                <div class="leaderboard-name">${user.first_name || user.username}${isCurrentUser ? ' (You)' : ''}</div>
                                <div class="leaderboard-stats">
                                    <span>üì∫ ${user.ads_today_count || 0} ads</span>
                                </div>
                            </div>
                            <div class="leaderboard-reward">${user.ads_today_count || 0}</div>
                        </div>
                    `;
                }).join('');
                
                // Update user position
                const userPos = document.getElementById('userPosition');
                const userRank = data.leaderboard.findIndex(u => u.telegram_id === userData?.telegram_id) + 1;
                
                if (userRank > 0) {
                    const userAds = data.leaderboard[userRank - 1].ads_today_count || 0;
                    userPos.innerHTML = `
                        <div class="text-center">
                            <div style="font-size: 32px; font-weight: 900; color: var(--primary-light); margin-bottom: 8px;">#${userRank}</div>
                            <div style="font-size: 14px; color: var(--text-secondary);">You have watched ${userAds} ads today</div>
                        </div>
                    `;
                } else {
                    userPos.innerHTML = '<p class="text-center" style="color: var(--text-secondary);">Watch ads to rank!</p>';
                }
                
            } catch (error) {
                console.error('Leaderboard error:', error);
            }
        }

        // ===========================
        // MINING
        // ===========================

        function handleMining() {
            if (!userData) return;

            const now = Date.now();
            
            if (userData.mining_start_time) {
                const start = new Date(userData.mining_start_time).getTime();
                const elapsed = now - start;
                const duration = 3 * 60 * 60 * 1000;
                
                if (elapsed >= duration) {
                    watchMiningAdThenClaim();
                } else {
                    showNotification('‚è∞ Mining in progress...', 'error');
                }
            } else {
                watchMiningAdThenStart();
            }
        }

        async function watchMiningAdThenStart() {
            if (!checkMonetagSDK()) {
                showNotification('‚ö†Ô∏è Ad system loading...', 'error');
                return;
            }

            try {
                showLoading(true);
                
                const adType = adCounter % 2 === 0 ? 'pop' : 'interstitial';
                adCounter++;
                
                const adPromise = adType === 'pop' ? show_10078826('pop') : show_10078826();
                
                adPromise.then(async () => {
                    try {
                        const response = await fetch(`${CONFIG.API_URL}/mining/${userData.telegram_id}/start`, {
                            method: 'POST'
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            userData = data;
                            updateUI();
                            startMiningCheck();
                            showNotification('‚õèÔ∏è Mining started!');
                        } else {
                            showNotification(data.error, 'error');
                        }
                    } catch (error) {
                        showNotification('Mining error: ' + error.message, 'error');
                    }
                    
                    showLoading(false);
                }).catch((error) => {
                    showNotification('Watch ad completely', 'error');
                    showLoading(false);
                });

            } catch (error) {
                showNotification('Ad error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        async function watchMiningAdThenClaim() {
            if (!checkMonetagSDK()) {
                showNotification('‚ö†Ô∏è Ad system loading...', 'error');
                return;
            }

            try {
                showLoading(true);
                
                const adType = adCounter % 2 === 0 ? 'pop' : 'interstitial';
                adCounter++;
                
                const adPromise = adType === 'pop' ? show_10078826('pop') : show_10078826();
                
                adPromise.then(async () => {
                    try {
                        const response = await fetch(`${CONFIG.API_URL}/mining/${userData.telegram_id}/claim`, {
                            method: 'POST'
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            userData = data;
                            updateUI();
                            showNotification('üéâ Mining reward claimed!');
                            clearInterval(miningInterval);
                            startMiningCheck();
                            createConfetti();
                        } else {
                            showNotification(data.error, 'error');
                        }
                    } catch (error) {
                        showNotification('Claim error: ' + error.message, 'error');
                    }
                    
                    showLoading(false);
                }).catch((error) => {
                    showNotification('Watch ad completely', 'error');
                    showLoading(false);
                });

            } catch (error) {
                showNotification('Ad error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        function startMiningCheck() {
            if (miningInterval) clearInterval(miningInterval);
            
            miningInterval = setInterval(() => {
                if (!userData || !userData.mining_start_time) {
                    document.getElementById('mineButton').disabled = false;
                    document.getElementById('mineButton').textContent = 'üöÄ START MINING';
                    document.getElementById('miningTimer').textContent = 'Ready to start!';
                    document.getElementById('miningProgress').style.width = '0%';
                    return;
                }

                const now = Date.now();
                const start = new Date(userData.mining_start_time).getTime();
                const duration = 3 * 60 * 60 * 1000;
                const elapsed = now - start;
                const remaining = duration - elapsed;

                if (remaining <= 0) {
                    document.getElementById('mineButton').disabled = false;
                    document.getElementById('mineButton').textContent = 'üí∞ CLAIM REWARD';
                    document.getElementById('miningTimer').textContent = '‚úÖ Ready to claim!';
                    document.getElementById('miningProgress').style.width = '100%';
                } else {
                    const hours = Math.floor(remaining / 3600000);
                    const minutes = Math.floor((remaining % 3600000) / 60000);
                    const seconds = Math.floor((remaining % 60000) / 1000);
                    
                    document.getElementById('miningTimer').textContent = 
                        `‚è∞ ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    const progress = (elapsed / duration) * 100;
                    document.getElementById('miningProgress').style.width = progress + '%';
                    document.getElementById('mineButton').disabled = true;
                    document.getElementById('mineButton').textContent = '‚è≥ MINING...';
                }
            }, 1000);
        }

        // ===========================
        // WATCH SIMPLE ADS
        // ===========================

        async function watchSimpleAd() {
            if (!userData) return;
            
            const watchedToday = userData.ads_watch_simple_today || 0;
            if (watchedToday >= 1000) {
                showNotification('‚ö†Ô∏è Daily limit reached', 'error');
                return;
            }

            if (!checkMonetagSDK()) {
                showNotification('‚ö†Ô∏è Ad system loading...', 'error');
                return;
            }

            try {
                showLoading(true);
                
                const adType = adCounter % 2 === 0 ? 'pop' : 'interstitial';
                adCounter++;
                
                const adPromise = adType === 'pop' ? show_10078826('pop') : show_10078826();

                adPromise.then(async () => {
                    try {
                        const response = await fetch(`${CONFIG.API_URL}/earn/watch-simple/${userData.telegram_id}`, {
                            method: 'POST'
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            userData = data;
                            updateUI();
                            loadLeaderboard();
                            showNotification('üéâ +0.000012 TON earned!');
                        } else {
                            showNotification(data.error, 'error');
                        }
                    } catch (error) {
                        showNotification('Error: ' + error.message, 'error');
                    }
                    
                    showLoading(false);
                }).catch((error) => {
                    showNotification('Ad closed', 'error');
                    showLoading(false);
                });

            } catch (error) {
                showNotification('Ad error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        // ===========================
        // WATCH FOR KEYS
        // ===========================

        async function watchForKey() {
            if (!userData) return;
            
            const adsToday = userData.ads_for_keys_today || 0;
            if (adsToday >= 250) {
                showNotification('‚ö†Ô∏è Daily limit reached', 'error');
                return;
            }

            if (!checkMonetagSDK()) {
                showNotification('‚ö†Ô∏è Ad system loading...', 'error');
                return;
            }

            try {
                showLoading(true);

                const adType = adCounter % 2 === 0 ? 'pop' : 'interstitial';
                adCounter++;
                
                const adPromise = adType === 'pop' ? show_10078826('pop') : show_10078826();

                adPromise.then(async () => {
                    try {
                        const response = await fetch(`${CONFIG.API_URL}/earn/watch-for-key/${userData.telegram_id}`, {
                            method: 'POST'
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            userData = data;
                            updateUI();
                            loadLeaderboard();
                            showNotification('üîë +1 Key earned!');
                        } else {
                            showNotification(data.error, 'error');
                        }
                    } catch (error) {
                        showNotification('Error: ' + error.message, 'error');
                    }
                    
                    showLoading(false);
                }).catch((error) => {
                    showNotification('Watch ad completely', 'error');
                    showLoading(false);
                });

            } catch (error) {
                showNotification('Ad error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        // ===========================
        // LUCKY WHEEL
        // ===========================

        function initWheel() {
            const canvas = document.getElementById('wheelCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 160;

            const segments = [
                { label: '0.000009', color: '#6366f1', icon: 'üíß', textColor: '#fff' },
                { label: '0.000012', color: '#f59e0b', icon: 'üíõ', textColor: '#000' },
                { label: '0.000010', color: '#3b82f6', icon: 'üíô', textColor: '#fff' },
                { label: '0.000015', color: '#10b981', icon: 'üíö', textColor: '#fff' },
                { label: '0.000017', color: '#8b5cf6', icon: 'üíé', textColor: '#fff' },
                { label: 'RETRY', color: '#ec4899', icon: 'üîÑ', textColor: '#fff' }
            ];

            function drawWheel(rotation = 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const anglePerSegment = (2 * Math.PI) / segments.length;
                
                // Draw segments with improved styling
                segments.forEach((segment, i) => {
                    const startAngle = rotation + i * anglePerSegment;
                    const endAngle = startAngle + anglePerSegment;
                    
                    // Main segment
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                    ctx.closePath();
                    
                    // Gradient fill
                    const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                    gradient.addColorStop(0, segment.color);
                    gradient.addColorStop(1, adjustColor(segment.color, -30));
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                    // Border
                    ctx.strokeStyle = '#0f172a';
                    ctx.lineWidth = 4;
                    ctx.stroke();
                    
                    // Inner glow
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius - 10, startAngle, endAngle);
                    ctx.closePath();
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // Text and icon
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(startAngle + anglePerSegment / 2);
                    ctx.textAlign = 'center';
                    
                    // Icon
                    ctx.font = 'bold 32px Arial';
                    ctx.fillText(segment.icon, radius * 0.6, 10);
                    
                    // Label with shadow
                    ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                    ctx.shadowBlur = 4;
                    ctx.shadowOffsetX = 2;
                    ctx.shadowOffsetY = 2;
                    ctx.fillStyle = segment.textColor;
                    ctx.font = 'bold 14px "Space Grotesk", monospace';
                    ctx.fillText(segment.label, radius * 0.6, 32);
                    
                    ctx.restore();
                });
                
                // Center circle glow
                const centerGradient = ctx.createRadialGradient(centerX, centerY, 60, centerX, centerY, 100);
                centerGradient.addColorStop(0, 'rgba(251, 191, 36, 0.3)');
                centerGradient.addColorStop(1, 'transparent');
                ctx.fillStyle = centerGradient;
                ctx.beginPath();
                ctx.arc(centerX, centerY, 100, 0, 2 * Math.PI);
                ctx.fill();
            }

            function adjustColor(color, amount) {
                const num = parseInt(color.replace('#', ''), 16);
                const r = Math.max(0, Math.min(255, (num >> 16) + amount));
                const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));
                const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));
                return '#' + ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
            }

            drawWheel();
            window.drawWheel = drawWheel;
        }

        async function spinWheel() {
            if (wheelSpinning) return;
            
            if (!userData || (userData.keys_current || 0) < 1) {
                showNotification('‚ö†Ô∏è Need 1 Key to spin!', 'error');
                return;
            }

            wheelSpinning = true;
            document.getElementById('spinBtn').disabled = true;
            
            try {
                showLoading(true);
                const response = await fetch(`${CONFIG.API_URL}/earn/spin-wheel/${userData.telegram_id}`, {
                    method: 'POST'
                });
                const data = await response.json();
                
                if (!response.ok) {
                    showNotification(data.error, 'error');
                    showLoading(false);
                    wheelSpinning = false;
                    document.getElementById('spinBtn').disabled = false;
                    return;
                }

                showLoading(false);
                
                const canvas = document.getElementById('wheelCanvas');
                const segments = 6;
                const anglePerSegment = (2 * Math.PI) / segments;
                
                let currentRotation = 0;
                const spins = 5;
                const targetRotation = spins * 2 * Math.PI + (Math.random() * anglePerSegment);
                const duration = 3000;
                const startTime = Date.now();

                function animate() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const easeOut = 1 - Math.pow(1 - progress, 3);
                    currentRotation = targetRotation * easeOut;
                    
                    window.drawWheel(currentRotation);
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        userData = data;
                        updateUI();
                        
                        if (data.spin_result === 'RETRY') {
                            showNotification('üîÑ FREE SPIN! Try again!');
                        } else if (data.spin_result >= 0.000017) {
                            showNotification(`üéâ JACKPOT! +${data.spin_result.toFixed(6)} TON!`);
                            createConfetti();
                        } else {
                            showNotification(`‚úÖ You won +${data.spin_result.toFixed(6)} TON!`);
                        }
                        
                        wheelSpinning = false;
                        document.getElementById('spinBtn').disabled = false;
                    }
                }

                animate();

            } catch (error) {
                showNotification('Spin error: ' + error.message, 'error');
                showLoading(false);
                wheelSpinning = false;
                document.getElementById('spinBtn').disabled = false;
            }
        }

        // ===========================
        // WITHDRAW ADS
        // ===========================

        async function watchWithdrawAd() {
            if (!userData) return;

            const adsWatched = userData.withdraw_ads_watched_current || 0;
            if (adsWatched >= 5) {
                showNotification('‚úÖ Already unlocked!', 'error');
                return;
            }

            if (!checkMonetagSDK()) {
                showNotification('‚ö†Ô∏è Ad system loading...', 'error');
                return;
            }

            try {
                showLoading(true);

                const adType = adCounter % 2 === 0 ? 'pop' : 'interstitial';
                adCounter++;
                
                const adPromise = adType === 'pop' ? show_10078826('pop') : show_10078826();

                adPromise.then(async () => {
                    try {
                        const response = await fetch(`${CONFIG.API_URL}/withdraw/${userData.telegram_id}/watch-ad`, {
                            method: 'POST'
                        });
                        const data = await response.json();
                        
                        if (response.ok) {
                            userData = data;
                            updateUI();
                            
                            const newAdsWatched = data.withdraw_ads_watched_current || 0;
                            if (newAdsWatched >= 5) {
                                showNotification('üîì Withdrawal UNLOCKED!');
                            } else {
                                showNotification(`‚úÖ Ad ${newAdsWatched}/5 watched!`);
                            }
                        } else {
                            showNotification(data.error, 'error');
                        }
                    } catch (error) {
                        showNotification('Error: ' + error.message, 'error');
                    }
                    
                    showLoading(false);
                }).catch((error) => {
                    showNotification('Watch ad completely', 'error');
                    showLoading(false);
                });

            } catch (error) {
                showNotification('Ad error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        // ===========================
        // WITHDRAW
        // ===========================

        async function handleWithdraw() {
            const email = document.getElementById('faucetpayEmail').value.trim();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const level = getUserLevel(userData.xp || 0);
            
            if (!email || !amount) {
                showNotification('‚ùå Fill all fields', 'error');
                return;
            }
            
            if (amount < level.min_withdraw) {
                showNotification(`‚ùå Min ${level.min_withdraw.toFixed(4)} TON`, 'error');
                return;
            }
            
            if (amount > userData.balance) {
                showNotification('‚ùå Insufficient balance', 'error');
                return;
            }
            
            try {
                showLoading(true);
                
                const response = await fetch(`${CONFIG.API_URL}/withdraw/${userData.telegram_id}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        faucetpay_email: email,
                        amount: amount
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    userData = data.user || data;
                    updateUI();
                    document.getElementById('faucetpayEmail').value = '';
                    document.getElementById('withdrawAmount').value = '';
                    showNotification('üéâ Withdrawal successful!');
                    createConfetti();
                } else {
                    showNotification('‚ùå ' + (data.error || 'Failed'), 'error');
                }
                
                showLoading(false);
            } catch (error) {
                showNotification('‚ùå Error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        // ===========================
        // TASKS
        // ===========================

        async function handleChannelTask() {
            await handleTask('join_channel', 'channelTaskBtn');
        }

        async function handleWithdrawChannelTask() {
            await handleTask('join_withdraw_channel', 'withdrawChannelTaskBtn');
        }

        async function handleTask(taskType, btnId) {
            const btn = document.getElementById(btnId);
            const btnText = btn.textContent;
            
            const channelUrl = taskType === 'join_channel' 
                ? `https://t.me/${CONFIG.CHANNEL_USERNAME}` 
                : `https://t.me/${CONFIG.WITHDRAW_CHANNEL_USERNAME}`;
            
            if (btnText === 'Join') {
                window.open(channelUrl, '_blank');
                btn.textContent = 'Verify';
            } else if (btnText === 'Verify') {
                try {
                    showLoading(true);
                    const response = await fetch(`${CONFIG.API_URL}/task/${userData.telegram_id}/verify`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ task_type: taskType })
                    });
                    const data = await response.json();
                    
                    if (response.ok && data.verified) {
                        btn.textContent = 'Claim';
                        showNotification('‚úÖ Verified!');
                    } else {
                        showNotification('‚ùå Join channel first', 'error');
                    }
                    showLoading(false);
                } catch (error) {
                    showNotification('Error: ' + error.message, 'error');
                    showLoading(false);
                }
            } else if (btnText === 'Claim') {
                try {
                    showLoading(true);
                    const response = await fetch(`${CONFIG.API_URL}/task/${userData.telegram_id}/claim`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ task_type: taskType })
                    });
                    const data = await response.json();
                    
                    if (response.ok) {
                        userData = data;
                        updateUI();
                        btn.textContent = '‚úÖ Done';
                        btn.disabled = true;
                        showNotification('üéâ +0.0001 TON earned!');
                    } else {
                        showNotification(data.error, 'error');
                    }
                    showLoading(false);
                } catch (error) {
                    showNotification('Error: ' + error.message, 'error');
                    showLoading(false);
                }
            }
        }

        function showTaskDetail(taskNum) {
            if (!userData) return;
            
            currentTaskDetail = taskNum;
            const task = CONFIG.DAILY_TASKS[taskNum];
            
            const miningCount = userData.mining_count || 0;
            const adsCount = (userData.ads_watch_simple_today || 0) + (userData.ads_for_keys_today || 0);
            const coinsCount = userData.coins_current || 0;
            
            const miningDone = miningCount >= task.mining;
            const adsDone = adsCount >= task.ads;
            const coinsDone = coinsCount >= task.coins;
            
            const rewardAmount = taskNum === 1 ? '0.001' : taskNum === 2 ? '0.002' : '0.003';
            
            document.getElementById('taskDetailTitle').textContent = `Daily Challenge #${taskNum}`;
            
            const requirementsHTML = `
                <div class="requirement-item">
                    <span class="requirement-label">‚ö° Mining Sessions</span>
                    <span class="requirement-progress ${miningDone ? 'complete' : 'incomplete'}">
                        ${miningCount} / ${task.mining}
                    </span>
                </div>
                <div class="requirement-item">
                    <span class="requirement-label">üì∫ Ads Watched</span>
                    <span class="requirement-progress ${adsDone ? 'complete' : 'incomplete'}">
                        ${adsCount} / ${task.ads}
                    </span>
                </div>
                <div class="requirement-item">
                    <span class="requirement-label">ü™ô Coins Collected</span>
                    <span class="requirement-progress ${coinsDone ? 'complete' : 'incomplete'}">
                        ${coinsCount} / ${task.coins}
                    </span>
                </div>
                <div style="margin-top: 20px; padding: 16px; background: var(--bg-glass); border-radius: 12px; text-align: center;">
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Reward</div>
                    <div style="font-size: 24px; font-weight: 900; color: var(--success); font-family: 'Space Grotesk', monospace;">
                        +${rewardAmount} TON
                    </div>
                </div>
            `;
            
            document.getElementById('taskDetailRequirements').innerHTML = requirementsHTML;
            
            const claimBtn = document.getElementById('taskDetailClaimBtn');
            if (miningDone && adsDone && coinsDone) {
                claimBtn.disabled = false;
                claimBtn.textContent = 'üéâ CLAIM REWARD';
            } else {
                claimBtn.disabled = true;
                claimBtn.textContent = '‚ùå COMPLETE ALL REQUIREMENTS';
            }
            
            document.getElementById('taskDetailModal').classList.add('show');
        }

        function closeTaskDetail() {
            document.getElementById('taskDetailModal').classList.remove('show');
            currentTaskDetail = null;
        }

        async function claimTaskFromDetail() {
            if (!currentTaskDetail) return;
            await claimDailyTask(currentTaskDetail);
        }

        async function claimDailyTask(taskNum) {
            if (!userData) return;
            
            const task = CONFIG.DAILY_TASKS[taskNum];
            
            const miningCount = userData.mining_count || 0;
            const adsCount = (userData.ads_watch_simple_today || 0) + (userData.ads_for_keys_today || 0);
            const coinsCount = userData.coins_current || 0;
            
            const miningDone = miningCount >= task.mining;
            const adsDone = adsCount >= task.ads;
            const coinsDone = coinsCount >= task.coins;
            
            if (!miningDone || !adsDone || !coinsDone) {
                showNotification('‚ùå Complete all requirements first!', 'error');
                showTaskDetail(taskNum);
                return;
            }
            
            try {
                showLoading(true);
                const response = await fetch(`${CONFIG.API_URL}/task/${userData.telegram_id}/claim-daily`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ task_number: taskNum })
                });
                const data = await response.json();
                
                if (response.ok) {
                    userData = data;
                    updateUI();
                    closeTaskDetail();
                    const rewardAmount = taskNum === 1 ? '0.001' : taskNum === 2 ? '0.002' : '0.003';
                    showNotification(`üéâ +${rewardAmount} TON earned!`);
                    createConfetti();
                } else {
                    showNotification(data.error || 'Failed to claim', 'error');
                }
                showLoading(false);
            } catch (error) {
                showNotification('Error: ' + error.message, 'error');
                showLoading(false);
            }
        }

        // ===========================
        // REFERRAL
        // ===========================

        function copyReferralLink() {
            const link = document.getElementById('referralLink').textContent;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(link).then(() => {
                    showNotification('üìã Link copied!');
                }).catch(() => {
                    fallbackCopy(link);
                });
            } else {
                fallbackCopy(link);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                showNotification('üìã Link copied!');
            } catch (err) {
                showNotification('‚ùå Copy failed', 'error');
            }
            document.body.removeChild(textArea);
        }

        function shareReferralLink() {
            const link = document.getElementById('referralLink').textContent;
            const text = `üéâ Join TON Reward DJDN v10.0! üí∞\n\nEarn TON by watching ads!\n\nJoin now:`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'TON Reward DJDN',
                    text: text,
                    url: link
                }).catch((err) => {
                    if (err.name !== 'AbortError') {
                        openTelegramShare(link);
                    }
                });
            } else {
                openTelegramShare(link);
            }
        }

        function openTelegramShare(link) {
            const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent('üéâ Join TON Reward DJDN! üí∞')}`;
            window.open(shareUrl, '_blank');
        }

        // ===========================
        // NAVIGATION
        // ===========================

        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            const pageEl = document.getElementById('page-' + pageName);
            if (pageEl) {
                pageEl.classList.add('active');
            }
            
            const navItem = document.querySelector(`.nav-item[onclick="showPage('${pageName}')"]`);
            if (navItem) {
                navItem.classList.add('active');
            }
            
            // Reload leaderboard when showing that page
            if (pageName === 'leaderboard') {
                loadLeaderboard();
            }
        }

        function switchTaskTab(tabName) {
            document.querySelectorAll('#page-tasks .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#page-tasks .tab-content').forEach(c => c.classList.remove('active'));
            
            const tab = document.querySelector(`#page-tasks .tab[onclick="switchTaskTab('${tabName}')"]`);
            const content = document.getElementById('tab-' + tabName);
            
            if (tab) tab.classList.add('active');
            if (content) content.classList.add('active');
        }

        function switchEarnTab(tabName) {
            document.querySelectorAll('#page-earn .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#page-earn .tab-content').forEach(c => c.classList.remove('active'));
            
            const tab = document.querySelector(`#page-earn .tab[onclick="switchEarnTab('${tabName}')"]`);
            const content = document.getElementById('earn-' + tabName);
            
            if (tab) tab.classList.add('active');
            if (content) content.classList.add('active');
        }

        function switchLevelTab(tabName) {
            document.querySelectorAll('#page-level .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#page-level .tab-content').forEach(c => c.classList.remove('active'));
            
            const tab = document.querySelector(`#page-level .tab[onclick="switchLevelTab('${tabName}')"]`);
            const content = document.getElementById('level-' + tabName);
            
            if (tab) tab.classList.add('active');
            if (content) content.classList.add('active');
        }

        // ===========================
        // TIMERS
        // ===========================

        function startTimers() {
            setInterval(() => {
                const now = new Date();
                const tomorrow = new Date(Date.UTC(
                    now.getUTCFullYear(),
                    now.getUTCMonth(),
                    now.getUTCDate() + 1,
                    0, 0, 0, 0
                ));
                
                const remaining = tomorrow.getTime() - now.getTime();
                const hours = Math.floor(remaining / 3600000);
                const minutes = Math.floor((remaining % 3600000) / 60000);
                const seconds = Math.floor((remaining % 60000) / 1000);
                
                const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                const leaderboardTimer = document.getElementById('leaderboardTimer');
                const tasksTimer = document.getElementById('tasksTimer');
                
                if (leaderboardTimer) leaderboardTimer.textContent = timeString;
                if (tasksTimer) tasksTimer.textContent = timeString;
            }, 1000);
        }

        // ===========================
        // CONFETTI ANIMATION
        // ===========================

        function createConfetti() {
            const colors = ['#6366f1', '#ec4899', '#f59e0b', '#10b981'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }

        // ===========================
        // NOTIFICATIONS
        // ===========================

        function showNotification(message, type = 'success') {
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.className = 'toast-notification show ' + (type === 'error' ? 'error' : '');
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }

        function showLoading(show) {
            const overlay = document.getElementById('loadingOverlay');
            overlay.classList.toggle('show', show);
        }

        // ===========================
        // INITIALIZATION
        // ===========================

        window.addEventListener('load', () => {
            console.log('üöÄ TON REWARD DJDN v10.0 - ULTRA PROFESSIONAL EDITION');
            console.log('‚úÖ Modern Design Activated');
            console.log('‚úÖ Optimized Performance');
            console.log('‚úÖ Enhanced User Experience');
            console.log('‚úÖ Complete Guide System');
            console.log('‚úÖ Task Detail System');
            console.log('‚úÖ Real-time Leaderboard');
            console.log('‚úÖ 4500+ Lines of Professional Code');
            loadUserData();
        });

        // Refresh leaderboard every 30 seconds
        setInterval(() => {
            if (document.getElementById('page-leaderboard').classList.contains('active')) {
                loadLeaderboard();
            }
        }, 30000);
    </script>
</body>
</html>